public void testZipArchiveOutputStream() throws Exception {
    final byte[] data = new byte[] {'h', 'e', 'l', 'l', 'o'};
    final ByteArrayOutputStream baos = new ByteArrayOutputStream();
    final ZipArchiveOutputStream zos = new ZipArchiveOutputStream(baos);
    zos.putArchiveEntry(new ZipArchiveEntry("test"));
    zos.write(data);
    zos.closeArchiveEntry();
    zos.finish();
    zos.close();
    zos.finish();
    zos.close();
    zos.finish();
    zos.close();
    zos.finish();
    zos.close();
    zos.finish();
    zos.close();
    zos.finish();
    zos.close();
    zos.finish();
    zos.close();
    zos.finish();
    zos.close();
    zos.finish();
    assertEquals(0, zos.getBytesWritten());
