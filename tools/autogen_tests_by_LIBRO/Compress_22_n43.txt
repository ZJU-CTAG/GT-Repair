public void testReadTruncated() throws Exception {
    // The test data is a truncated bz2 file.
    byte[] data = new byte[]{
        66, 90, 104, 49, 49, 10, 40, -73, -80, -86, -93, -89, -89, -88, -88, -87, -87, -87,
        -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87,
        -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87,
        -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87, -87